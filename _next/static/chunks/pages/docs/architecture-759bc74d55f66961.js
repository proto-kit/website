(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6163],{6034:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/architecture",function(){return r(3627)}])},3627:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p},useTOC:function(){return useTOC}});var n=r(2676),i=r(4331),a=r(4080),o=r(9021),s=r(4814),l=r(5650),d=r.n(l);let c=Object.assign(function({children:e,num:t=3,className:r,style:i,...a}){return(0,n.jsx)("div",{className:(0,s.Z)("nextra-cards _mt-4 _gap-4 _grid","_not-prose",r),...a,style:{...i,"--rows":t},children:e})},{displayName:"Cards",Card:function({children:e,title:t,icon:r,arrow:i,href:a,...o}){return(0,n.jsxs)(d(),{href:a,className:(0,s.Z)("nextra-focus nextra-card _group _flex _flex-col _justify-start _overflow-hidden _rounded-lg _border _border-gray-200","_text-current _no-underline dark:_shadow-none","hover:_shadow-gray-100 dark:hover:_shadow-none _shadow-gray-100","active:_shadow-sm active:_shadow-gray-200","_transition-all _duration-200 hover:_border-gray-300",e?"_bg-gray-100 _shadow dark:_border-neutral-700 dark:_bg-neutral-800 dark:_text-gray-50 hover:_shadow-lg dark:hover:_border-neutral-500 dark:hover:_bg-neutral-700":"_bg-transparent _shadow-sm dark:_border-neutral-800 hover:_bg-slate-50 hover:_shadow-md dark:hover:_border-neutral-700 dark:hover:_bg-neutral-900"),...o,children:[e,(0,n.jsxs)("span",{className:(0,s.Z)("_flex _font-semibold _items-center _gap-2 _p-4 _text-gray-700 hover:_text-gray-900",i&&'after:_content-["→"] after:_transition-transform after:_duration-75 after:group-hover:_translate-x-0.5',e?"dark:_text-gray-300 dark:hover:_text-gray-100":"dark:_text-neutral-200 dark:hover:_text-neutral-50"),title:t,children:[r,(0,n.jsx)("span",{className:"_truncate",children:t})]})]})}});var h=r(8851);let u=(0,h.Z)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);function useTOC(e){return[{value:"Settlement, execution and data availability",id:"settlement-execution-and-data-availability",depth:3},{value:"Data availability",id:"data-availability",depth:4},{value:"Rollup as a state machine",id:"rollup-as-a-state-machine",depth:2},{value:"Application chain",id:"application-chain",depth:2}]}function _missingMdxReference(e,t){throw Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}var p=(0,i.c)(function(e){let{toc:t=useTOC(e)}=e,r={a:"a",blockquote:"blockquote",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.a)(),...e.components};return c||_missingMdxReference("Cards",!1),c.Card||_missingMdxReference("Cards.Card",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h1,{children:"Architecture"}),"\n",(0,n.jsxs)(r.p,{children:["Protokit is designed to be modular from the ground up, but where does the modularity come from?\nRollups in general have a 3 different layers of modularity: ",(0,n.jsx)(r.em,{children:"Settlement, Execution and Data Availability"}),"."]}),"\n",(0,n.jsx)(r.p,{children:"The Protokit framework provides built-in tools for addressing each of these layers, either directly or indirectly (by outsourcing the responsibilities)."}),"\n",(0,n.jsxs)(r.p,{children:["Protokit’s ",(0,n.jsx)(r.strong,{children:"Application chain"})," is composed of the following modularity layers: ",(0,n.jsx)(r.strong,{children:"Runtime, Protocol and Sequencer"}),".\nEvery modularity layer accepts a set of purpose-specific modules implemented in Typescript."]}),"\n",(0,n.jsxs)(r.blockquote,{children:["\n",(0,n.jsx)(r.p,{children:"Existing modules from 3rd party open-source projects can be easily reused too!"}),"\n"]}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{style:{textAlign:"left"},children:"Layer"}),(0,n.jsx)(r.th,{style:{textAlign:"left"},children:"Responsibilities"}),(0,n.jsx)(r.th,{style:{textAlign:"left"},children:"Example modules"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{style:{textAlign:"left"},children:(0,n.jsx)(r.strong,{children:"Runtime"})}),(0,n.jsx)(r.td,{style:{textAlign:"left"},children:"Business logic of the application chain"}),(0,n.jsx)(r.td,{style:{textAlign:"left"},children:"Balances, Vesting, Escrow, …"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{style:{textAlign:"left"},children:(0,n.jsx)(r.strong,{children:"Protocol"})}),(0,n.jsx)(r.td,{style:{textAlign:"left"},children:"Underlying state machine & block production circuits"}),(0,n.jsx)(r.td,{style:{textAlign:"left"},children:"StateTransitionProver, BlockProver, …"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{style:{textAlign:"left"},children:(0,n.jsx)(r.strong,{children:"Sequencer"})}),(0,n.jsx)(r.td,{style:{textAlign:"left"},children:"Orchestrates runtime & protocol, handles the block production pipeline, mempool and more"}),(0,n.jsx)(r.td,{style:{textAlign:"left"},children:"PrivateMempool, BlockProducer, GraphQLModule, …"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:t[0].id,children:t[0].value}),"\n",(0,n.jsxs)(r.p,{children:["How does ",(0,n.jsx)(r.em,{children:"settlement"}),", ",(0,n.jsx)(r.em,{children:"execution"})," and ",(0,n.jsx)(r.em,{children:"data availability"})," fit into the architecture of Protokit? The framework primarily takes care of the execution layer of your rollup,\noutsourcing the settlement layer to the Mina L1 blockchain."]}),"\n",(0,n.jsx)(r.h4,{id:t[1].id,children:t[1].value}),"\n",(0,n.jsxs)(r.p,{children:["In the current version of the SDK the data availability layer is handled by the sequencer,\nmaking all Protokit application chains ",(0,n.jsx)(r.a,{href:"https://ethereum.org/en/developers/docs/scaling/validium/",children:"validiums"}),".\nOnce the action/sequence state mempool module becomes available, the data availability will be (optionally) outsourced to the Mina L1 as well.\nAlternatively if you’d like to use a different data availability layer, you could implement your own sequencer module."]}),"\n",(0,n.jsx)(r.h2,{id:t[2].id,children:t[2].value}),"\n",(0,n.jsx)(r.p,{children:"Blockchains and especially rollups are simply state machines that describe how a state of a system can transition from state A to state B.\nProtokit is built with this concept in mind, providing a set of tools to make it easy to implement your own rollup as a set of provable state transitions."}),"\n",(0,n.jsxs)(r.p,{children:["State in a rollup is represented by a ",(0,n.jsx)(r.a,{href:"https://en.wikipedia.org/wiki/Merkle_tree",children:"merkle tree"})," of potentially variable height, where each leaf represents a piece of the state itself.\nMerkle trees are then represented by their root hash. Thanks to a combination of merkle trees and zero-knowledge proofs, an app chain can transition from state A to state B in a provable way."]}),"\n",(0,n.jsx)(r.p,{children:"Producing a block is equivalent to applying a set of state transitions from state A to state B, where the state transitions are a result of executing user’s transactions on the rollup itself."}),"\n",(0,n.jsx)(r.h2,{id:t[3].id,children:t[3].value}),"\n",(0,n.jsx)(r.p,{children:"Application chain is a top level modularity container that contains all the components required to run a rollup."}),"\n",(0,n.jsx)(r.p,{children:"To ensure compatibility and ease of development between clients and sequencer(s), an app-chain definition can be reused for both the client(s) and the sequencer.\nLight clients are responsible for forging transactions on the client side, while the sequencer is responsible for e.g. producing blocks after receiving said transactions.\nBoth of these share a portion of the app-chain definition, such as the runtime."}),"\n",(0,n.jsx)(r.p,{children:"As mentioned previously, the app-chain is composed of 3 additional layers \uD83D\uDC47"}),"\n",(0,n.jsxs)(c,{children:[(0,n.jsx)(c.Card,{icon:(0,n.jsx)(u,{}),title:"Runtime",href:"/docs/architecture/runtime"}),(0,n.jsx)(c.Card,{icon:(0,n.jsx)(u,{}),title:"Protocol",href:"/docs/architecture/protocol"}),(0,n.jsx)(c.Card,{icon:(0,n.jsx)(u,{}),title:"Sequencer",href:"/docs/architecture/sequencer"})]})]})},"/docs/architecture",{filePath:"src/pages/docs/architecture.mdx",timestamp:1762857674e3,pageMap:a.v,frontMatter:{},title:"Architecture"},"undefined"==typeof RemoteContent?useTOC:RemoteContent.useTOC)}},function(e){e.O(0,[4331,4080,9774,2888,179],function(){return e(e.s=6034)}),_N_E=e.O()}]);