(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7538],{7426:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/architecture/runtime",function(){return n(3288)}])},3288:function(e,t,n){"use strict";n.r(t),n.d(t,{useTOC:function(){return useTOC}});var i=n(2676),s=n(4331),a=n(4080),o=n(9021);function useTOC(e){return[{value:"Runtime module",id:"runtime-module",depth:2},{value:"Soft-failing runtime methods",id:"soft-failing-runtime-methods",depth:3},{value:"Runtime module interoperability",id:"runtime-module-interoperability",depth:3}]}t.default=(0,s.c)(function(e){let{toc:t=useTOC(e)}=e,n={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",p:"p",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{children:"Runtime"}),"\n",(0,i.jsxs)(n.p,{children:["Runtime is the first modular component of the app-chain, containing all the bussiness logic of the application itself.\nBusiness logic is implemented as ",(0,i.jsx)(n.em,{children:"runtime modules"}),", defining the ",(0,i.jsx)(n.em,{children:"runtime state"})," and ",(0,i.jsx)(n.em,{children:"runtime methods"})," of each module.\nRuntime modules can be composed together to create a runtime that suits the needs of the application."]}),"\n",(0,i.jsxs)(n.p,{children:["Runtime methods are functions callable by user’s transactions, responsible for reading and writing to the state - with accordance to their inner business logic implementation.\nEach runtime module can define it’s own state (storage), which can be of two types: ",(0,i.jsx)(n.em,{children:"state"})," and ",(0,i.jsx)(n.em,{children:"state map"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:t[0].id,children:t[0].value}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"At the time of writing Protokit does not provide any runtime modules out of the box. If your chain needs to work with balances, yo’ll have to implement your own runtime module. Alternatively you can\nwait for our upcoming @proto-kit/library package, which will provide a set of runtime modules out of the box."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Example runtime module “Balances” might define its own storage to be a ",(0,i.jsx)(n.em,{children:"ledger"})," of type ",(0,i.jsx)(n.em,{children:"state map"}),", storing a key value pairing between public keys and balances.\nAccompanied by methods callable by users via transactions, such as ",(0,i.jsx)(n.em,{children:"transfer"}),", ",(0,i.jsx)(n.em,{children:"mint"})," and ",(0,i.jsx)(n.em,{children:"burn"}),". Transfer method would read the ledger,\ncheck if the sender has enough balance and if so, update the ledger accordingly."]}),"\n",(0,i.jsxs)(n.p,{children:["Behind the scenes every interaction with the state produces a ",(0,i.jsx)(n.em,{children:"state transition"}),". Runtime does not apply any state transitions to the merkle tree itself, this allows us to keep the runtime circuits as simple as possible.\nAs a result we can achieve adequate proof paralelisation between business logic and state transition circuits."]}),"\n",(0,i.jsx)(n.h3,{id:t[1].id,children:t[1].value}),"\n",(0,i.jsxs)(n.p,{children:["In order to ensure provability of both successful and failing transactions, we can’t fail the proof generation forcefully using built in O1JS assertions (e.g. assertEquals).\nAs an alternative way to soft-fail runtime method execution, we provide a custom ",(0,i.jsx)(n.code,{children:"assert"})," function that keeps track of the assertion failures and returns them as a part of the runtime method result - as a boolean status."]}),"\n",(0,i.jsx)(n.h3,{id:t[2].id,children:t[2].value}),"\n",(0,i.jsx)(n.p,{children:"Runtime modules within the same runtime are aware of each other, allowing them to call each other’s methods and reach each other’s state."}),"\n",(0,i.jsx)(n.p,{children:"Calling a method of runtime module B, from within a runtime module A would result in the appropriate state transitions\nwithin each respective module. This allows for a modular approach to building your runtime, where each module can be developed and tested in isolation."})]})},"/docs/architecture/runtime",{filePath:"src/pages/docs/architecture/runtime.mdx",timestamp:1762858652e3,pageMap:a.v,frontMatter:{},title:"Runtime"},"undefined"==typeof RemoteContent?useTOC:RemoteContent.useTOC)}},function(e){e.O(0,[4331,4080,9774,2888,179],function(){return e(e.s=7426)}),_N_E=e.O()}]);