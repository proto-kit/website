(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7310],{2789:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/architecture/sequencer",function(){return t(6811)}])},6811:function(e,n,t){"use strict";t.r(n),t.d(n,{useTOC:function(){return useTOC}});var s=t(2676),r=t(4331),i=t(2423),o=t(9021);function useTOC(e){return[{value:"Transaction sequencing",id:"transaction-sequencing",depth:2},{value:"Proving pipeline",id:"proving-pipeline",depth:2},{value:"User facing APIs",id:"user-facing-apis",depth:2}]}n.default=(0,r.c)(function(e){let{toc:n=useTOC(e)}=e,t={em:"em",h1:"h1",h2:"h2",p:"p",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{children:"Sequencer"}),"\n",(0,s.jsx)(t.p,{children:"Sequencer is the gateway between user’s transactions and the block production. In a nutshell, the sequencer is responsible for\naccepting user’s transactions into a mempool, validating them, sequencing them as part of the block production process, orchestrating the block production prover worker pipeline,\nand finally submitting the rollup block to the settlement layer."}),"\n",(0,s.jsxs)(t.p,{children:["Following the modularity principles, all working components of the sequencer are ",(0,s.jsx)(t.em,{children:"sequencer modules"}),", and may be added, removed or replaced at developer’s convinience."]}),"\n",(0,s.jsx)(t.h2,{id:n[0].id,children:n[0].value}),"\n",(0,s.jsx)(t.p,{children:"One of the main roles of the sequencer node is to execute transactions in a certain predetermined order. Before the sequencer is able to do so, users have to\nsubmit their transactions to the sequencer’s compatible mempool - this may be a private mempool, or eventually a public mempool such as the sequence state on the Mina L1."}),"\n",(0,s.jsx)(t.p,{children:"Once the mempool module determines the order of transactions, sequencing can begin. The sequencer will execute all the transactions from the ‘block’ (bundle) in a simulated fashion, providing updated\nstate from one transaction to another. This allows us to circumvent any potential race conditions steming from client side paralelism, as it may be the case for the Mina L1 smart contracts."}),"\n",(0,s.jsxs)(t.p,{children:["Data writes from the sequencing process are persisted in the sequencer’s storage, and available as the ",(0,s.jsx)(t.em,{children:"latest state"})," for the upcoming block, or to be read via external APIs."]}),"\n",(0,s.jsx)(t.p,{children:"As part of this process, the sequencer collects all the necessary information for proving, which happens independently from the sequencing. Most importantly the proving itself happens\nin parallel in order to achieve the maximum possible efficiency of the available hardware."}),"\n",(0,s.jsx)(t.h2,{id:n[1].id,children:n[1].value}),"\n",(0,s.jsxs)(t.p,{children:["Sequencing results in a creation of ",(0,s.jsx)(t.em,{children:"unproven blocks"}),", which contain all the necessary information extracted during sequencing.\nThis may include transaction execution results, state diffs, the produced state transitions and more."]}),"\n",(0,s.jsxs)(t.p,{children:["In order for the sequencer to create proofs of all the sequenced computation that happened previously, it has transform the unproven blocks into ",(0,s.jsx)(t.em,{children:"traces"}),".\nTraces work as an input for our proving pipeline - where all the app-chain circuits can be executed in parallel, since all their inputs/outputs are precomputed as traces."]}),"\n",(0,s.jsx)(t.p,{children:"The aforementioned architecture allows us to paralelize the most resource intensive part of the block production process, which is the proving itself."}),"\n",(0,s.jsx)(t.h2,{id:n[2].id,children:n[2].value}),"\n",(0,s.jsx)(t.p,{children:"Among all other responsibilities, the sequencer may also provide modules for inspecting its internal state via APIs. Out of the box we provide a GraphQL API\nto e.g. read runtime / protocol state, submit transactions to the private mempool or retrieve merkle witnesses for historical state proofs."})]})},"/docs/architecture/sequencer",{filePath:"src/pages/docs/architecture/sequencer.mdx",timestamp:1763551153e3,pageMap:i.v,frontMatter:{},title:"Sequencer"},"undefined"==typeof RemoteContent?useTOC:RemoteContent.useTOC)}},function(e){e.O(0,[4331,2423,9774,2888,179],function(){return e(e.s=2789)}),_N_E=e.O()}]);